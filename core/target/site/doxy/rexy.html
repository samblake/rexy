<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<html lang="en">
<!--<![endif]-->

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="keywords" content="">

    <title>rexy 1.3-SNAPSHOT Documentation</title>

    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css" integrity="sha512-i8+QythOYyQke6XbStjt9T4yQHhhM+9Y9yTY1fOxoDQwsQpKMEpIoSQZ8mVomtnVCf9PBvoQDnKl06gGOOD19Q==" crossorigin="anonymous" />    
    <link rel="stylesheet" type="text/css" href="css/stroke.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.2/css/bootstrap.min.css" integrity="sha512-FWzWGvyU7ueo21SbhoCnq6YwJfDsjPEa9G+SmLRHTDfYj0MzYEuHFlfsVBWQlgmCd2HsjHKeQYV9ul/S464XfQ==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" integrity="sha512-c42qTSw/wPZ3/5LBzD+Bw5f7bSF2oxou6wEb+I/lqeaKV5FDIfMvvRp772y4jcJLKuGUOpbJMdg/BTl50fJYAw==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prettyPhoto/3.1.6/css/prettyPhoto.min.css" integrity="sha512-aB3UdGCt+QZdSlPCgDsJBJ+JytRb8oq/cdMEpLTaypINSyom0h5vcw2HsF1m0eZtWsetJllPtQOfCPM9UrdKYw==" crossorigin="anonymous" />
    <link rel="stylesheet" type="text/css" href="css/style.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/styles/shCore.min.css" integrity="sha512-q9B+BRcW0p2dRy94K1it1sy2Dv9UkAqIYoAUcWQY7Pis6fcQSAe5lohmJiymUL5glkr+Gu8fEVW6UjNKz6qm3A==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/styles/shThemeRDark.min.css" integrity="sha512-qemR3rXL1kWkVm8r+bEYNyHp97dgDZZjMEQ+EhSlHIjP2L9ddatWJeuwU1+mwKj6sxaiFCxRwXrVh94CxcMoAw==" crossorigin="anonymous" />
    <!-- CUSTOM -->
    <link rel="stylesheet" type="text/css" href="css/custom.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>
    <button onclick="topFunction()" id="myBtn" title="Go to top"><i class="fa fa-chevron-up" aria-hidden="true"></i></button>

    <script>
        var mybutton = document.getElementById("myBtn");
        window.onscroll = function() {scrollFunction()};
        function scrollFunction() {
            if (document.body.scrollTop > 1000 || document.documentElement.scrollTop > 1000) {
                mybutton.style.display = "block";
            } else {
                mybutton.style.display = "none";
            }
        }
        function topFunction() {
            window.scrollTo({ top: 0, behavior: 'smooth' })
            document.documentElement.scrollTo({ top: 0, behavior: 'smooth' })
        }

        document.addEventListener("DOMContentLoaded", () => {
            document.querySelector('#mode').addEventListener('click',()=>{
                document.querySelector('html').classList.toggle('dark');
            })
        });
    </script>

    <div id="wrapper">

        <div id="mode">
            <div class="dark">
                <svg aria-hidden="true" viewBox="0 0 512 512">
                    <title>lightmode</title>
                    <path fill="currentColor" d="M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"></path>
                </svg>
            </div>
            <div class="light">
                <svg aria-hidden="true" viewBox="0 0 512 512">
                    <title>darkmode</title>
                    <path fill="currentColor" d="M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"></path>
                </svg>
            </div>
        </div>

        <div class="container">

            <section id="top" class="section docs-heading">
                <div class="row">
                    <div class="col-md-12">
                        <div class="big-title text-center">
                            <h1>rexy 1.3-SNAPSHOT Documentation</h1>
                                                            <p class="lead">A lightweight REST mock/proxy server</p>
                                                    </div>
                    </div>
                </div>
            </section>

            <div class="row">

                <div class="col-md-3">
                    <nav class="docs-sidebar" data-spy="affix" data-offset-top="300" data-offset-bottom="200" role="navigation">
                        <ul class="nav">
                                                            <li><a href="#introduction">Introduction</a>
                                                                    </li>
                                                            <li><a href="#configuration">Configuration</a>
                                                                    </li>
                                                            <li><a href="#modules">Modules</a>
                                                                            <ul class="nav">
                                                                                            <li><a href="#modules-removal-module">Removal Module</a></li>
                                                                                            <li><a href="#modules-cors-module">Cors Module</a></li>
                                                                                            <li><a href="#modules-proxy-module">Proxy Module</a></li>
                                                                                            <li><a href="#modules-mock-module">Mock Module</a></li>
                                                                                            <li><a href="#modules-delay-module">Delay Module</a></li>
                                                                                    </ul>
                                                                    </li>
                                                            <li><a href="#matchers">Matchers</a>
                                                                            <ul class="nav">
                                                                                            <li><a href="#matchers-regex-request-matcher">Regex Request Matcher</a></li>
                                                                                    </ul>
                                                                    </li>
                                                    </ul>
                    </nav>
                </div>

                <div class="col-md-9">
                                            <section id="introduction" class="section">
                            <div class="row">
                                <div class="col-md-12 left-align">
                                   <h2 class="dark-text">Introduction</h2>
                                    <div class="row">
                                        <div class="col-md-12 full">
                                            <h1>Rexy</h1>
<p>A lightweight REST mock/proxy server.</p>
<h3>Overview</h3>
<p>Rexy is designed to allow dynamic testing of different scenarios during integration testing of REST endpoints. It is
typically configured as a proxy server with the standard behaviour to simply forward requests on to the actual API
endpoint. Rexy can then be configured to intercept certain requests and return specific responses. This can be helpful
for testing error scenarios that may be difficult or impossible to trigger on an ad-hoc bases on the API endpoint
itself.</p>
<p>Details of the different APIs to proxy as well as presets for responses are configured by a simple JSON file. Runtime
configuration is performed via JMX or via <a href="https://github.com/samblake/wexy">Wexy</a> as a web application.</p>
<h3>Running</h3>
<p>Start Rexy by running the <code>rexy.Rexy</code> class, optionally specifying a configuration file as an argument. Alternatively
build via Maven and run the resulting jar.</p>
<h3>FAQ</h3>
<p><strong>Can Rexy be used to test APIs without proxying?</strong></p>
<p>Yes, it is not a requirement to specify an endpoint to proxy to. If a request is not intercepted a 502 response will be
returned. This can be useful for testing APIs when there is only a production endpoint.</p>
<p><strong>Can Rexy be configured without JMX?</strong></p>
<p>Although it still uses JMX in the background the <a href="https://github.com/samblake/wexy">Wexy module</a> provides a web
interface for runtime configuration.</p>
<p><strong>Can non-JSON response presets be configured?</strong></p>
<p>Yes, they just need to be specified in their own files and referenced from the JSON configuration.</p>
                                        </div>
                                    </div>
                                </div>

                                
                            </div>
                        </section>
                                            <section id="configuration" class="section">
                            <div class="row">
                                <div class="col-md-12 left-align">
                                   <h2 class="dark-text">Configuration</h2>
                                    <div class="row">
                                        <div class="col-md-12 full">
                                            <p>Models the base config:</p>

 <pre>{@code
 {
   "port": "8081",
   "baseUrl": "/",
   "scanPackages": ["rexy.module"]
   "modules": {
     "mock": {
       ...
     },
     "proxy": {
       ...
     }
   },
   "apis": [
     ...
   ],
   "imports": [
     ...
   ]
 }
 }</pre>                                        </div>
                                    </div>
                                </div>

                                
                            </div>
                        </section>
                                            <section id="modules" class="section">
                            <div class="row">
                                <div class="col-md-12 left-align">
                                   <h2 class="dark-text">Modules</h2>
                                    <div class="row">
                                        <div class="col-md-12 full">
                                            <p>Rexy it built around pluggable chain of interceptors knows as modules. When Rexy receives a request it is passed
 to each module in order. Modifications can be made to the request as it is passed up the chain. When any of the
 modules generate a response the flow is instantly reversed and the response will be passed back down the chain in
 the opposite direction. Again modifications can be made to the response as it flows down the chain. When the initial
 module is reached the response will be returned to the originating server. All modules are configured to some extent
 by the Rexy JSON configuration file, however some (those that should be modified at runtime) can also be configured
 by JMX.</p>

 <p>No modules are enabled by default. In order to enable a module it should be specified in the `modules` section in the
 configuration. Modules can be configured in any order but the final two modules in the chain should probably always be
 the mock module followed by the proxy module.</p>                                        </div>
                                    </div>
                                </div>

                                                                    <div class="col-md-12 left-align">
                                        <h4 id="modules-removal-module">Removal Module</h4>
                                        <div class="row">
                                            <div class="col-md-12 full">
                                                A module that removes a header from requests.

 <pre>{@code
 "removal": {
   "enabled": true,
   "headerName": "X-Requested-With"
 }
 }</pre>

 <table summary="Configuration details">
     <tr>
         <th>Name</th>
         <th>Description</th>
         <th>Type</th>
         <th>Default</th>
     </tr>
     <tr>
         <td>headerName</td>
         <td>The name of the header to removed.</td>
         <td>string</td>
         <td>X-Requested-With</td>
     </tr>
 </table>                                            </div>
                                        </div>
                                    </div>
                                                                    <div class="col-md-12 left-align">
                                        <h4 id="modules-cors-module">Cors Module</h4>
                                        <div class="row">
                                            <div class="col-md-12 full">
                                                <p>A module that generates a preflight response for OPTIONS requests and adds/overrides the
 {@code Access-Control-Allow-Headers} header to the response of all other requests The module
 can be triggered conditionally based on a specified header value. The configuration is:</p>

 <pre>{@code
   "cors": {
     "enabled": true,
     "allowOrigin": "*",
     "headerName": "X-Requested-With",
     "headerValue": "Wexy"
   }
 }</pre>

 <table summary="Configuration details">
     <tr>
         <th>Name</th>
         <th>Description</th>
         <th>Type</th>
         <th>Default</th>
     </tr>
     <tr>
         <td>allowOrigin</td>
         <td>The allowOrigin header value.</td>
         <td>string</td>
         <td>*</td>
     </tr>
     <tr>
         <td>headerName</td>
         <td>The name of the header that should be used to conditionally trigger the module.</td>
         <td>string</td>
         <td>X-Requested-With</td>
     </tr>
     <tr>
         <td>headerValue</td>
         <td>The value of the header that should be used to conditionally trigger the module. If no value
         is set then the module will trigger for all requests.</td>
         <td>string</td>
         <td><i>null</i></td>
     </tr>
 </table>                                            </div>
                                        </div>
                                    </div>
                                                                    <div class="col-md-12 left-align">
                                        <h4 id="modules-proxy-module">Proxy Module</h4>
                                        <div class="row">
                                            <div class="col-md-12 full">
                                                <p>A module that proxies a request to another URL. This will always write a response so will always be the
 last module in a chain.</p>

 <p>To configure a proxy an API is created in the configuration. The {@code baseUrl} of the API corresponds
 to the context root of the API on the Rexy server. The {@code proxy} value is the base URL that any request
 to that context root will be forwarded to.</p>

 <p>For example, if the following configuration, if Rexy was running on localhost going to
 http://localhost/api would be proxied to http://www.metaweather.com/api and going to
 http://localhost/api/location/search/?query=london would be proxied to
 http://www.metaweather.com/api/location/search/?query=london.</p>

 <pre>{@code
   "apis": [
     {
       "name": "metaweather",
       "baseUrl": "api/",
       "contentType": "application/json",
       "proxy": "http://www.metaweather.com/api",
       "endpoints": [
       {
         "name": "location",
         "endpoint": "location/search/?query={query}",
       }
     }
   ]
 }</pre>                                            </div>
                                        </div>
                                    </div>
                                                                    <div class="col-md-12 left-align">
                                        <h4 id="modules-mock-module">Mock Module</h4>
                                        <div class="row">
                                            <div class="col-md-12 full">
                                                <p>A module that intercepts a request and optionally returns a mock response.</p>

 <p>To configure a delay an API is created in the configuration. Each endpoint has an an MBean associated with
 it under the name {@code Rexy/[API name]/[Endpoint name]/mock}. The MBean has an <i>intercept</i> property which
 is set to <i>false</i> by default. When it is set to <i>true</i> no mock response is returned and the module
 chain continues, when it is set to <i>true</i> a mock response is written and no further MBeans in the chain will
 be called.</p>

 <p>The MBean has other properties: <i>content type</i>, <i>HTTP status</i> and <i>body</i>. These values
 dictate what is returned as the mock response.</p>

 <p>For example, in the following configuration an MBean would be configured under
 {@code Rexy/metaweather/location/mock}.</p>

 <pre>{@code
   "apis": [
     {
       "name": "metaweather",
       "baseUrl": "api/",
       "contentType": "application/json",
       "proxy": "http://www.metaweather.com/api",
       "endpoints": [{
         "name": "location",
         "endpoint": "/location/search/?query={query}",
         "responses": [{
             "name": "Successful",
             "httpStatus": 200,
             "body": {
               "title": "London",
               "location_type": "City",
               "woeid": 44418,
               "latt_long": "51.506321,-0.12714"
             }
           },
           {
             "name": "Invalid",
             "httpStatus": 401,
             "body": {
               "error": "invalid request"
             }
           }
         ]
       }]
     }
   ]
 }</pre>

 <p>It is also possible to create presets that can be set to be returned. These can be seen in the above
 example under the <i>responses</i> array. Each response will have bean an MBean associated with it under
 {@code Rexy/metaweather/location/preset-[name]} where <i>name</i> is the name of the response. If no name
 is given the index of the response in the array is used instead. The http status, headers and body to
 return can be specified in the response. The <i>body</i> value can be any unstructured JSON.</p>

 <p>The module has two configuration values - <i>interceptOnSet</i> and <i>prettyPrint</i>. If
 interceptOnSet is set to true, when the set operator is called on an example response, the mock bean will
 have it's <i>intercept</i> value set to <i>true</i>. If prettyPrint is set to true then mocked responses
 will be pretty printed.</p>                                            </div>
                                        </div>
                                    </div>
                                                                    <div class="col-md-12 left-align">
                                        <h4 id="modules-delay-module">Delay Module</h4>
                                        <div class="row">
                                            <div class="col-md-12 full">
                                                <p>A module that intercepts a request and optionally adds a delay before the next module in the chain.</p>

 <p>To configure a delay an API is created in the configuration. Each endpoint has an an MBean associated with
 it under the name {@code Rexy/[API name]/[Endpoint name]/delay}. The MBean has a single property - delay. If
 the value of <i>delay</i> is greater then zero then a delay of that number of seconds will be artificially
 introduced.</p>

 <p>For example, in the following configuration an MBean would be configured under
 {@code Rexy/metaweather/location/delay}.</p>

 <pre>{@code
   "apis": [
     {
       "name": "metaweather",
       ...
       "endpoints": [
       {
         "name": "location",
         ...
       }
     }
   ]
 }</pre>                                            </div>
                                        </div>
                                    </div>
                                
                            </div>
                        </section>
                                            <section id="matchers" class="section">
                            <div class="row">
                                <div class="col-md-12 left-align">
                                   <h2 class="dark-text">Matchers</h2>
                                    <div class="row">
                                        <div class="col-md-12 full">
                                            Matchers are used to see if an MBean should handle a HTTP request. Currently there is only a single, simple
 regular expression based matcher, others may be provided in the future to addrss the limitations of that approach.                                        </div>
                                    </div>
                                </div>

                                                                    <div class="col-md-12 left-align">
                                        <h4 id="matchers-regex-request-matcher">Regex Request Matcher</h4>
                                        <div class="row">
                                            <div class="col-md-12 full">
                                                <p>Associates an MBean with a HTTP method and a regular expression pattern. The matcher can be used to check
 if the MBean should handle a requests.                                            </div>
                                        </div>
                                    </div>
                                
                            </div>
                        </section>
                                    </div>

            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.2/jquery.min.js" integrity="sha512-Znnj7n0C0Xz1tdk6ih39WPm3kSCTZEKnX/7WaNbySW7GFbwSjO5r9/uOAGLMbgv6llI1GdghC7xdaQsFUStM1w==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.2/js/bootstrap.min.js" integrity="sha512-AthmoOeufPNt1aNOMYiHopEQKnT7y15IeG0cfoYPFD7vrvCGQIIMv2KHZ+n3mRQQSH2D1k1C58bnBH4ywNvsdQ==" crossorigin="anonymous"></script>    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/retina.js/2.1.3/retina.min.js" integrity="sha512-9RcSZpXlWiAq12BM82QI0qRtusQJonuUZ/h/bZl+Cd6O4Pw7UnGV6gnCcS5wV03/zvLwCeL3enaUa0RPy+VM2w==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fitvids/1.2.0/jquery.fitvids.min.js" integrity="sha512-/2sZKAsHDmHNoevKR/xsUKe+Bpf692q4tHNQs9VWWz0ujJ9JBM67iFYbIEdfDV9I2BaodgT5MIg/FTUmUv3oyQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.js" integrity="sha512-Rd5Gf5A6chsunOJte+gKWyECMqkG8MgBYD1u80LOOJBfl6ka9CtatRrD4P0P5Q5V/z/ecvOCSYC8tLoWNrCpPg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prettyPhoto/3.1.6/js/jquery.prettyPhoto.min.js" integrity="sha512-IB7NSySDRedVEsYsOVuzN5O5jwRjV2ewVVmkDFIgE0yNu11GreBCOMv07i7hlQck41T+sTXSL05/cG+De4cZDw==" crossorigin="anonymous"></script>
    <!-- CUSTOM PLUGINS -->
    <script src="js/custom.js"></script>
    <script src="js/main.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shCore.min.js" integrity="sha512-Z5dAQyvO8EyY1cHQcqYTYL8z6PDjM0URql6AioNodsSxxTJS5Fqfujr+o/4ye2dLp0he1qAVTiZABTunv6oLow==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushXml.min.js" integrity="sha512-XHSgk11LDMG/R4L6Tn9cl4xbwbO5dnsgJrtXd/oT6KVf00wqAog2wY8j3kySxmxRoiBAxON5lZZW9fqHj2CE7g==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushCss.min.js" integrity="sha512-cOMAi17PcGyVC09B5SKHeSAOmtrSgX+rR6u3O0lye4mHOmT+wqU/viFCjZCKX6Rps07iglxhWy2Al6MWFVtb2A==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushJScript.min.js" integrity="sha512-1sgIP38qm/y/33QFXdgSgBinVscLgnICy//6P5vVGaT/NyK2zZfsbLtrz/pPnix5CbEImM88s4HHxDFEHBcINg==" crossorigin="anonymous"></script>
</body>

</html>
